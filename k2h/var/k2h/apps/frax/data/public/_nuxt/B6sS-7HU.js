import{d as S,T as v,a as A,b as P,n as u,e as h,J as T,w as g,F as C,r as z,f as a,t as n,br as B,o as m,b6 as j,K as M,b7 as V,aP as K,g as N,$ as b,ah as I,aW as R}from"./DpJrzV67.js";import{U as E}from"./CvV4Pg1d.js";import{_ as F}from"./BS4fYeUA.js";import{_ as J}from"./CPxWTdTV.js";const W={class:"w-full flex flex-col items-center justify-center mt-6"},H={class:"w-full max-w-2xl flex"},L=["placeholder"],Q={key:0},Z={class:"underline decoration-dotted decoration-1 decoration-black/75 dark:decoration-white/75 underline-offset-2 cursor-help"},q={key:1,class:"w-full flex justify-center mb-20"},G={class:"text-red-500 text-lg"},O={key:2,class:"w-full flex justify-center mb-20"},X={class:"text-gray-500 text-lg"},Y={key:0,class:"p-4 text-lg"},ee={key:1,class:"p-6 text-center"},te={class:"text-2xl font-bold mb-2"},oe={class:"text-base text-gray-700 mb-6"},ae=["placeholder"],ne={class:"flex justify-center gap-4"},se={class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},ue=S({__name:"index",setup(le){const x=v(!1),y=v(""),k=v(""),_=v(""),p=v(""),r=v([]),i=v(""),{t:l}=A({useScope:"global"}),$=async()=>{i.value="",r.value=[];let t;i.value=l("products.domain.loading");const o=/^[a-zA-Z0-9.-]+$/;if(!_.value.trim()||!o.test(_.value)||_.value.startsWith(".")){i.value=l("products.domain.errors.notvalid");return}p.value=_.value.trim();try{const s=await(await fetch("https://saci.key2host.com/api/user/getDomainInfo")).json();if(Array.isArray(s.packages))t=s.packages;else{i.value=l("products.domain.errors.erranswer");return}}catch{i.value=l("products.domain.errors.confailed");return}const d=p.value.split("."),c=d.length>1?d[d.length-1]:null;i.value="",c&&t.sort((f,s)=>{if(f.name===c)return-1;if(s.name===c)return 1}),r.value=t},D=(t,o,d)=>{y.value=t,k.value=o;const c=R();if(Array.isArray(r.value)&&r.value.length>0){const f=t.split(".").pop(),s=r.value.find(w=>w.name===f);s?k.value?(c.addToBasket({type:"domain",name:y.value,amount:s.amount,id:s.priceID}),c.openSlideover()):x.value=!0:console.log("Keine passende Domain gefunden.")}else console.log("Results ist kein gültiges Array oder leer:",r.value)};return P({title:l("products.domain.title"),ogTitle:l("products.domain.title"),description:l("products.domain.description"),ogDescription:l("products.domain.description")}),(t,o)=>{const d=K,c=E,f=F,s=J,w=B;return m(),u(C,null,[h(c,{headline:t.$t("products.domain.headline"),title:t.$t("products.domain.title"),orientation:"horizontal"},{default:g(()=>[a("div",W,[a("div",H,[j(a("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>_.value=e),onKeyup:M($,["enter"]),placeholder:t.$t("products.domain.searchPlaceholder"),class:"w-full p-4 text-lg border border-gray-300 rounded-l-2xl shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,L),[[V,_.value]]),h(d,{onClick:$,color:"neutral",size:"xl",class:"px-6 py-4 rounded-l-none rounded-r-2xl",label:N(l)("products.domain.search"),autofocus:""},null,8,["label"])])])]),_:1},8,["headline","title"]),p.value&&r.value.length>0?(m(),u("div",Q,[(m(!0),u(C,null,z(r.value,e=>(m(),u("div",{key:e.name,class:"w-full flex flex-wrap justify-center gap-4 max-md:max-w-[350px] max-w-[90%] mx-auto mb-4"},[h(s,{class:I(["w-full max-w-6xl relative",e.available?"":"opacity-50"]),title:`.${e.name} Domain`,color:e.available?"primary":"gray",icon:e.available?"i-heroicons-check-circle text-green-500 text-3xl":"i-heroicons-x-circle text-gray-500 text-3xl"},{description:g(()=>[b(" Die Domain "+n(p.value.split(".")[0]+"."+e.name)+" kostet ",1),h(f,{text:"Preise inkl. gesetzl. USt.",delay:0,placement:"top"},{default:g(()=>[a("span",Z,n(e.amount+" €"),1)]),_:2},1024),o[3]||(o[3]=b(" pro Jahr. "))]),default:g(()=>[h(d,{color:"neutral",size:"xl",class:"absolute top-1/2 right-4 transform -translate-y-1/2 px-4 py-2 rounded-lg shadow-md hidden sm:block",onClick:U=>D(p.value.split(".")[0]+"."+e.name,e.available,e.amount),autofocus:""},{default:g(()=>[b(n(e.available?t.$t("products.domain.addBasket"):t.$t("products.domain.transfer.title")),1)]),_:2},1032,["onClick"]),h(d,{color:"neutral",size:"xl",class:"px-4 py-2 rounded-lg shadow-md w-full sm:w-auto sm:self-center sm:hidden",onClick:U=>D(p.value.split(".")[0]+"."+e.name,e.available,e.amount),autofocus:""},{default:g(()=>[b(n(e.available?t.$t("products.domain.addBasket"):t.$t("products.domain.transfer.title")),1)]),_:2},1032,["onClick"])]),_:2},1032,["title","color","class","icon"])]))),128))])):i.value?(m(),u("div",q,[a("p",G,n(i.value),1)])):p.value?(m(),u("div",O,[a("p",X,n(t.$t("products.domain.noresults")),1)])):T("",!0),h(w,{open:x.value,"onUpdate:open":o[2]||(o[2]=e=>x.value=e),dismissible:!1},{content:g(()=>[k.value?(m(),u("div",Y," Die Domain "+n(y.value)+" kann momentan nicht gekauft werden. ",1)):(m(),u("div",ee,[a("h2",te,n(t.$t("products.domain.transfer.title")),1),a("p",oe,n(t.$t("products.domain.transfer.message")),1),a("input",{type:"text",placeholder:"AUTH-Schlüssel für "+y.value,class:"border border-gray-300 rounded-lg p-2 w-1/2 mb-6"},null,8,ae),a("div",ne,[a("button",{class:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",onClick:o[1]||(o[1]=e=>x.value=!1)},n(t.$t("products.domain.transfer.abort")),1),a("button",se,n(t.$t("products.domain.transfer.continue")),1)])]))]),_:1},8,["open"])],64)}}});export{ue as default};
