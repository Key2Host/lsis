import{d as S,T as f,a as P,b as T,n as u,e as h,J as B,w as v,F as C,r as W,f as s,t as l,br as j,o as m,b6 as L,K as V,b7 as M,aP as Z,g as K,$ as y,ah as N,aW as R}from"./Bo-8rFFv.js";import{U as E}from"./C39tIxZn.js";import{_ as I}from"./C4LeHy1z.js";import{_ as F}from"./CQgiX0XM.js";const J={class:"w-full flex flex-col items-center justify-center mt-6"},H={class:"w-full max-w-2xl flex"},Q=["placeholder"],q={key:0},G={class:"underline decoration-dotted decoration-1 decoration-black/75 dark:decoration-white/75 underline-offset-2 cursor-help"},O={key:1,class:"w-full flex justify-center mb-20"},X={class:"text-red-500 text-lg"},Y={key:2,class:"w-full flex justify-center mb-20"},ee={class:"text-gray-500 text-lg"},te={key:0,class:"p-4 text-lg"},ae={key:1,class:"p-6 text-center"},oe={class:"text-2xl font-bold mb-2"},ne={class:"text-base text-gray-700 mb-6"},se=["placeholder"],le={class:"flex justify-center gap-4"},re={class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},pe=S({__name:"index",setup(ie){const _=f(!1),x=f(""),w=f(""),b=f(""),p=f(""),i=f([]),d=f(""),{t:r}=P({useScope:"global"}),A=new RegExp("^(((xn--)?[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*)|((xn--)?[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\\.)+([a-zA-Z]{2,}))$");function z(t){const o=t.trim().toLowerCase();if(!o||o.length>253)return!1;const n=o.split(".");if(n.length>1){for(const e of n)if(!e.length||e.length>63||e.startsWith("-")||e.endsWith("-")||e.includes("--")&&!e.startsWith("xn--"))return!1}else{const e=n[0];if(!e.length||e.length>63||e.startsWith("-")||e.endsWith("-")||e.includes("--")&&!e.startsWith("xn--"))return!1}return A.test(o)}const $=async()=>{d.value="",i.value=[];let t;if(d.value=r("products.domain.loading"),!z(b.value)){d.value=r("products.domain.errors.notvalid");return}p.value=b.value.trim();try{const c=await(await fetch("https://saci.key2host.com/api/user/getDomainInfo")).json();if(Array.isArray(c.packages))t=c.packages;else{d.value=r("products.domain.errors.erranswer");return}}catch{d.value=r("products.domain.errors.confailed");return}const o=p.value.split("."),n=o.length>1?o[o.length-1]:null;d.value="",n&&t.sort((e,c)=>e.name===n?-1:c.name===n?1:0),i.value=t},D=(t,o,n)=>{x.value=t,w.value=o;const e=R();if(Array.isArray(i.value)&&i.value.length>0){const c=t.split(".").pop(),g=i.value.find(k=>k.name===c);g?w.value?(e.addToBasket({type:"domain",name:x.value.toLocaleLowerCase(),amount:g.amount,id:g.priceID}),e.openSlideover()):_.value=!0:console.log("Keine passende Domain gefunden.")}else console.log("Results ist kein gültiges Array oder leer:",i.value)};return T({title:r("products.domain.title"),ogTitle:r("products.domain.title"),description:r("products.domain.description"),ogDescription:r("products.domain.description")}),(t,o)=>{const n=Z,e=E,c=I,g=F,k=j;return m(),u(C,null,[h(e,{headline:t.$t("products.domain.headline"),title:t.$t("products.domain.title"),orientation:"horizontal"},{default:v(()=>[s("div",J,[s("div",H,[L(s("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>b.value=a),onKeyup:V($,["enter"]),placeholder:t.$t("products.domain.searchPlaceholder"),class:"w-full p-4 text-lg border border-gray-300 rounded-l-2xl shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,Q),[[M,b.value]]),h(n,{onClick:$,color:"neutral",size:"xl",class:"px-6 py-4 rounded-l-none rounded-r-2xl",label:K(r)("products.domain.search"),autofocus:""},null,8,["label"])])])]),_:1},8,["headline","title"]),p.value&&i.value.length>0?(m(),u("div",q,[(m(!0),u(C,null,W(i.value,a=>(m(),u("div",{key:a.name,class:"w-full flex flex-wrap justify-center gap-4 max-md:max-w-[350px] max-w-[90%] mx-auto mb-4"},[h(g,{class:N(["w-full max-w-6xl relative",a.available?"":"opacity-50"]),title:`.${a.name.toLowerCase()} Domain`,color:a.available?"primary":"gray",icon:a.available?"i-heroicons-check-circle text-green-500 text-3xl":"i-heroicons-x-circle text-gray-500 text-3xl"},{description:v(()=>[y(" Die Domain "+l(p.value.split(".")[0]+"."+a.name.toLowerCase())+" kostet ",1),h(c,{text:"Preise inkl. gesetzl. USt.",delay:0,placement:"top"},{default:v(()=>[s("span",G,l(a.amount+" €"),1)]),_:2},1024),o[3]||(o[3]=y(" pro Jahr. "))]),default:v(()=>[h(n,{color:"neutral",size:"xl",class:"absolute top-1/2 right-4 transform -translate-y-1/2 px-4 py-2 rounded-lg shadow-md hidden sm:block",onClick:U=>D(p.value.split(".")[0]+"."+a.name,a.available,a.amount),autofocus:""},{default:v(()=>[y(l(a.available?t.$t("products.domain.addBasket"):t.$t("products.domain.transfer.title")),1)]),_:2},1032,["onClick"]),h(n,{color:"neutral",size:"xl",class:"px-4 py-2 rounded-lg shadow-md w-full sm:w-auto sm:self-center sm:hidden",onClick:U=>D(p.value.split(".")[0]+"."+a.name,a.available,a.amount),autofocus:""},{default:v(()=>[y(l(a.available?t.$t("products.domain.addBasket"):t.$t("products.domain.transfer.title")),1)]),_:2},1032,["onClick"])]),_:2},1032,["title","color","class","icon"])]))),128))])):d.value?(m(),u("div",O,[s("p",X,l(d.value),1)])):p.value?(m(),u("div",Y,[s("p",ee,l(t.$t("products.domain.noresults")),1)])):B("",!0),h(k,{open:_.value,"onUpdate:open":o[2]||(o[2]=a=>_.value=a),dismissible:!1},{content:v(()=>[w.value?(m(),u("div",te," Die Domain "+l(x.value)+" kann momentan nicht gekauft werden. ",1)):(m(),u("div",ae,[s("h2",oe,l(t.$t("products.domain.transfer.title")),1),s("p",ne,l(t.$t("products.domain.transfer.message")),1),s("input",{type:"text",placeholder:"AUTH-Schlüssel für "+x.value,class:"border border-gray-300 rounded-lg p-2 w-1/2 mb-6"},null,8,se),s("div",le,[s("button",{class:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",onClick:o[1]||(o[1]=a=>_.value=!1)},l(t.$t("products.domain.transfer.abort")),1),s("button",re,l(t.$t("products.domain.transfer.continue")),1)])]))]),_:1},8,["open"])],64)}}});export{pe as default};
