import{d as U,T as v,a as P,bq as S,b as T,n as u,e as f,J as j,w as h,F as k,r as B,f as n,t as l,br as I,o as m,b5 as L,K as V,b6 as W,aP as M,g as R,$ as b,ah as Z}from"./Bvle-60Y.js";import{U as E}from"./HzHg4-8P.js";import{_ as K}from"./0uPdafeI.js";import{_ as N}from"./DoOcXeX8.js";import{u as F}from"./DnucqsMc.js";const J={class:"w-full flex flex-col items-center justify-center mt-6"},q={class:"w-full max-w-2xl flex"},H=["placeholder"],Q={key:0},G={class:"underline decoration-dotted decoration-1 decoration-black/75 dark:decoration-white/75 underline-offset-2 cursor-help"},O={key:1,class:"w-full flex justify-center mb-20"},X={class:"text-red-500 text-lg"},Y={key:2,class:"w-full flex justify-center mb-20"},ee={class:"text-gray-500 text-lg"},te={key:0,class:"p-4 text-lg"},oe={key:1,class:"p-6 text-center"},ae={class:"text-2xl font-bold mb-2"},se={class:"text-base text-gray-700 mb-6"},ne=["placeholder"],le={class:"flex justify-center gap-4"},re={class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},fe=U({__name:"index",setup(ie){const _=v(!1),x=v(""),p=v(""),d=v([]),c=v(""),{t:r}=P({useScope:"global"}),D=S(),$=new RegExp("^(((xn--)?[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*)|((xn--)?[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\\.)+([a-zA-Z]{2,}))$");function C(e){const a=e.trim().toLowerCase();if(!a||a.length>253)return!1;const s=a.split(".");if(s.length>1){for(const t of s)if(!t.length||t.length>63||t.startsWith("-")||t.endsWith("-")||t.includes("--")&&!t.startsWith("xn--"))return!1}else{const t=s[0];if(!t.length||t.length>63||t.startsWith("-")||t.endsWith("-")||t.includes("--")&&!t.startsWith("xn--"))return!1}return $.test(a)}const y=async()=>{c.value="",d.value=[];const e=[];if(c.value=r("products.domain.loading"),!C(x.value)){c.value=r("products.domain.errors.notvalid");return}p.value=x.value.trim();try{const i=await(await fetch("https://saci.key2host.com/api/user/getDomainInfo")).json();if(console.log(i.packages),Array.isArray(i.packages))i.packages.forEach(g=>{e.push({name:g.name,amount:g.amount,priceID:g.priceID,available:g.available})});else{c.value=r("products.domain.errors.erranswer");return}}catch(t){console.log(t),c.value=r("products.domain.errors.confailed");return}const a=p.value.split("."),s=a.length>1?a[a.length-1]:null;c.value="",s&&e.sort((t,i)=>t.name===s?-1:i.name===s?1:0),d.value=e},w=e=>{const a=F();if(Array.isArray(d.value)&&d.value.length>0){const s=e.split(".").pop(),t=d.value.find(i=>i.name===s);t?e?(a.setItem({id:t.priceID,name:e.toLocaleLowerCase(),type:"domain",amount:t.amount}),D.push("/checkout")):_.value=!0:console.log("Keine passende Domain gefunden.")}else console.log("Results ist kein gültiges Array oder leer:",d.value)};return T({title:r("products.domain.title"),ogTitle:r("products.domain.title"),description:r("products.domain.description"),ogDescription:r("products.domain.description")}),(e,a)=>{const s=M,t=E,i=K,g=N,A=I;return m(),u(k,null,[f(t,{headline:e.$t("products.domain.headline"),title:e.$t("products.domain.title"),orientation:"horizontal"},{default:h(()=>[n("div",J,[n("div",q,[L(n("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>x.value=o),onKeyup:V(y,["enter"]),placeholder:e.$t("products.domain.searchPlaceholder"),class:"w-full p-4 text-lg border border-gray-300 rounded-l-2xl shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,H),[[W,x.value]]),f(s,{onClick:y,color:"neutral",size:"xl",class:"px-6 py-4 rounded-l-none rounded-r-2xl",label:R(r)("products.domain.search"),autofocus:""},null,8,["label"])])])]),_:1},8,["headline","title"]),p.value&&d.value.length>0?(m(),u("div",Q,[(m(!0),u(k,null,B(d.value,o=>(m(),u("div",{key:o.name,class:"w-full flex flex-wrap justify-center gap-4 max-md:max-w-[350px] max-w-[90%] mx-auto mb-4"},[f(g,{class:Z(["w-full max-w-6xl relative",o.available?"":"opacity-50"]),title:`.${o.name.toLowerCase()} Domain`,color:o.available?"primary":"gray",icon:o.available?"i-heroicons-check-circle text-green-500 text-3xl":"i-heroicons-x-circle text-gray-500 text-3xl"},{description:h(()=>[b(" Die Domain "+l(p.value.split(".")[0]+"."+o.name.toLowerCase())+" kostet ",1),f(i,{text:"Preise inkl. gesetzl. USt.",delay:0,placement:"top"},{default:h(()=>[n("span",G,l(o.amount+" €"),1)]),_:2},1024),a[3]||(a[3]=b(" pro Jahr. "))]),default:h(()=>[f(s,{color:"neutral",size:"xl",class:"absolute top-1/2 right-4 transform -translate-y-1/2 px-4 py-2 rounded-lg shadow-md hidden sm:block",onClick:z=>w(p.value.split(".")[0]+"."+o.name,o.available,o.amount),autofocus:""},{default:h(()=>[b(l(o.available?e.$t("products.domain.addBasket"):e.$t("products.domain.transfer.title")),1)]),_:2},1032,["onClick"]),f(s,{color:"neutral",size:"xl",class:"px-4 py-2 rounded-lg shadow-md w-full sm:w-auto sm:self-center sm:hidden",onClick:z=>w(p.value.split(".")[0]+"."+o.name,o.available,o.amount),autofocus:""},{default:h(()=>[b(l(o.available?e.$t("products.domain.addBasket"):e.$t("products.domain.transfer.title")),1)]),_:2},1032,["onClick"])]),_:2},1032,["title","color","class","icon"])]))),128))])):c.value?(m(),u("div",O,[n("p",X,l(c.value),1)])):p.value?(m(),u("div",Y,[n("p",ee,l(e.$t("products.domain.noresults")),1)])):j("",!0),f(A,{open:_.value,"onUpdate:open":a[2]||(a[2]=o=>_.value=o),dismissible:!1},{content:h(()=>[e.selectedDomainAvailable?(m(),u("div",te," Die Domain "+l(e.selectedDomain)+" kann momentan nicht gekauft werden. ",1)):(m(),u("div",oe,[n("h2",ae,l(e.$t("products.domain.transfer.title")),1),n("p",se,l(e.$t("products.domain.transfer.message")),1),n("input",{type:"text",placeholder:"AUTH-Schlüssel für "+e.selectedDomain,class:"border border-gray-300 rounded-lg p-2 w-1/2 mb-6"},null,8,ne),n("div",le,[n("button",{class:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",onClick:a[1]||(a[1]=o=>_.value=!1)},l(e.$t("products.domain.transfer.abort")),1),n("button",re,l(e.$t("products.domain.transfer.continue")),1)])]))]),_:1},8,["open"])],64)}}});export{fe as default};
