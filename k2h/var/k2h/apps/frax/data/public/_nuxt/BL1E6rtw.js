import{g as M,y as v,i as V,bF as B,k as S,c as h,l as m,a8 as j,w as c,F as k,r as I,a as n,m as l,bG as L,o as p,U as P,a9 as T,V as W,X as R,f as Z,d as E,n as N,s as x}from"./B8ecJpJH.js";import{M as F,_ as K}from"./DTuWgNWH.js";import{_ as O}from"./CpyEaHK0.js";import{_ as G}from"./Bs8Mnp1P.js";import{u as H}from"./DjlnejoN.js";const J={class:"w-full flex flex-col items-center justify-center mt-6"},Q={class:"w-full max-w-2xl flex"},X=["placeholder"],q={key:0},Y={class:"underline decoration-dotted decoration-1 decoration-black/75 dark:decoration-white/75 underline-offset-2 cursor-help"},ee={key:1,class:"w-full flex justify-center mb-20"},te={class:"text-red-500 text-lg"},ae={key:2,class:"w-full flex justify-center mb-20"},oe={class:"text-gray-500 text-lg"},se={key:0,class:"p-4 text-lg"},ne={key:1,class:"p-6 text-center"},le={class:"text-2xl font-bold mb-2"},ie={class:"text-base text-gray-700 mb-6"},re=["placeholder"],ce={class:"flex justify-center gap-4"},de={class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},ve=M({__name:"index",setup(ue){const y=v(!1),_=v(""),f=v(""),d=v([]),u=v(""),{t:r}=V({useScope:"global"}),$=B(),D=new RegExp("^(((xn--)?[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*)|((xn--)?[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\\.)+([a-zA-Z]{2,}))$");function C(e){const o=e.trim().toLowerCase();if(!o||o.length>253)return!1;const s=o.split(".");if(s.length>1){for(const t of s)if(!t.length||t.length>63||t.startsWith("-")||t.endsWith("-")||t.includes("--")&&!t.startsWith("xn--"))return!1}else{const t=s[0];if(!t.length||t.length>63||t.startsWith("-")||t.endsWith("-")||t.includes("--")&&!t.startsWith("xn--"))return!1}return D.test(o)}const b=async()=>{u.value="",d.value=[];const e=[];if(u.value=r("products.domain.loading"),!C(_.value)){u.value=r("products.domain.errors.notvalid");return}f.value=_.value.trim();try{const i=await(await fetch("https://saci.key2host.com/api/products/domain")).json();if(console.log(i.packages),Array.isArray(i.packages))i.packages.forEach(g=>{e.push({name:g.name,amount:g.amount,priceID:g.priceID,available:g.available})});else{u.value=r("products.domain.errors.erranswer");return}}catch(t){console.log(t),u.value=r("products.domain.errors.confailed");return}const o=f.value.split("."),s=o.length>1?o[o.length-1]:null;u.value="",s&&e.sort((t,i)=>t.name===s?-1:i.name===s?1:0),d.value=e},w=e=>{const o=H();if(Array.isArray(d.value)&&d.value.length>0){const s=e.split(".").pop(),t=d.value.find(i=>i.name===s);t?e?(o.setItem({id:t.priceID,name:e.toLocaleLowerCase(),type:"domain",amount:t.amount}),$.push("/checkout")):y.value=!0:console.log("Keine passende Domain gefunden.")}else console.log("Results ist kein gültiges Array oder leer:",d.value)};return S({title:r("products.domain.title"),ogTitle:r("products.domain.title"),description:r("products.domain.description"),ogDescription:r("products.domain.description")}),(e,o)=>{const s=R,t=K,i=F,g=O,A=G,z=L;return p(),h(k,null,[m(i,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"}},{default:c(()=>[m(t,{headline:e.$t("products.domain.headline"),title:e.$t("products.domain.title"),orientation:"horizontal"},{default:c(()=>[n("div",J,[n("div",Q,[P(n("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>_.value=a),onKeyup:T(b,["enter"]),placeholder:e.$t("products.domain.searchPlaceholder"),class:"w-full p-4 text-lg border border-gray-300 rounded-l-2xl shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,X),[[W,_.value]]),m(s,{onClick:b,color:"neutral",size:"xl",class:"px-6 py-4 rounded-l-none rounded-r-2xl",label:Z(r)("products.domain.search"),autofocus:""},null,8,["label"])])])]),_:1},8,["headline","title"])]),_:1}),f.value&&d.value.length>0?(p(),h("div",q,[(p(!0),h(k,null,I(d.value,a=>(p(),E(i,{key:a.name,initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2,ease:"easeOut"},class:"w-full flex flex-wrap justify-center gap-4 max-md:max-w-[350px] max-w-[90%] mx-auto mb-4"},{default:c(()=>[m(A,{class:N(["w-full max-w-6xl relative",a.available?"":"opacity-50"]),title:`.${a.name.toLowerCase()} Domain`,color:a.available?"primary":"gray",icon:a.available?"i-heroicons-check-circle text-green-500 text-3xl":"i-heroicons-x-circle text-gray-500 text-3xl"},{description:c(()=>[x(" Die Domain "+l(f.value.split(".")[0]+"."+a.name.toLowerCase())+" kostet ",1),m(g,{text:"Preise inkl. gesetzl. USt.",delay:0,placement:"top"},{default:c(()=>[n("span",Y,l(a.amount+" €"),1)]),_:2},1024),o[3]||(o[3]=x(" pro Jahr. "))]),default:c(()=>[m(s,{color:"neutral",size:"xl",class:"absolute top-1/2 right-4 transform -translate-y-1/2 px-4 py-2 rounded-lg shadow-md hidden sm:block",onClick:U=>w(f.value.split(".")[0]+"."+a.name,a.available,a.amount),autofocus:""},{default:c(()=>[x(l(a.available?e.$t("products.domain.addBasket"):e.$t("products.domain.transfer.title")),1)]),_:2},1032,["onClick"]),m(s,{color:"neutral",size:"xl",class:"px-4 py-2 rounded-lg shadow-md w-full sm:w-auto sm:self-center sm:hidden",onClick:U=>w(f.value.split(".")[0]+"."+a.name,a.available,a.amount),autofocus:""},{default:c(()=>[x(l(a.available?e.$t("products.domain.addBasket"):e.$t("products.domain.transfer.title")),1)]),_:2},1032,["onClick"])]),_:2},1032,["title","color","class","icon"])]),_:2},1024))),128))])):u.value?(p(),h("div",ee,[n("p",te,l(u.value),1)])):f.value?(p(),h("div",ae,[n("p",oe,l(e.$t("products.domain.noresults")),1)])):j("",!0),m(z,{open:y.value,"onUpdate:open":o[2]||(o[2]=a=>y.value=a),dismissible:!1},{content:c(()=>[e.selectedDomainAvailable?(p(),h("div",se," Die Domain "+l(e.selectedDomain)+" kann momentan nicht gekauft werden. ",1)):(p(),h("div",ne,[n("h2",le,l(e.$t("products.domain.transfer.title")),1),n("p",ie,l(e.$t("products.domain.transfer.message")),1),n("input",{type:"text",placeholder:"AUTH-Schlüssel für "+e.selectedDomain,class:"border border-gray-300 rounded-lg p-2 w-1/2 mb-6"},null,8,re),n("div",ce,[n("button",{class:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",onClick:o[1]||(o[1]=a=>y.value=!1)},l(e.$t("products.domain.transfer.abort")),1),n("button",de,l(e.$t("products.domain.transfer.continue")),1)])]))]),_:1},8,["open"])],64)}}});export{ve as default};
