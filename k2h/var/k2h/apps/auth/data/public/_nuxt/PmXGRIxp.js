import{_ as L}from"./BZo8QuCK.js";import{a as K,_ as H}from"./1ceanMiM.js";import{a as E,b as I}from"./DxbmArNL.js";import{d as A,N as b,c as _,w as M,e as k,o as w,af as o,n as t,l as n,ai as Z,a6 as S,F as B,r as T,ae as W,ah as G,V as U,D as C,aS as O,aW as X,b as $,aX as q,p as V}from"./BvlSr1Jo.js";import{_ as J}from"./bhDnW1A1.js";import{a as D}from"./D8rVyQy1.js";import"./CBK6fpqe.js";const Q={class:"space-y-6"},R={id:"password-strength",class:"text-sm font-medium"},Y={class:"space-y-1","aria-label":"Passwortanforderungen"},ee={class:"text-xs"},te={class:"sr-only"},le={class:"space-y-6"},ae={key:0,id:"password-match",class:"text-sm text-error-600 font-medium"},se=A({__name:"PasswordForm",props:{password:{type:String,required:!0},passwordsMatch:{type:Boolean,required:!0}},emits:["update:password","update:passwordsMatch"],setup(j,{emit:N}){const m=N,x=b(""),l=b(""),p=b(!1),f=b(!1);function h(u){return[{regex:/.{8,}/,text:"Mindestens 8 Zeichen"},{regex:/\d/,text:"Mindestens eine Zahl"},{regex:/[a-z]/,text:"Mindestens ein Kleinbuchstabe"},{regex:/[A-Z]/,text:"Mindestens ein Großbuchstabe"},{regex:/[^A-Za-z0-9]/,text:"Mindestens ein Sonderzeichen"}].map(i=>({met:i.regex.test(u),text:i.text}))}const P=_(()=>h(x.value)),r=_(()=>P.value.filter(u=>u.met).length),z=_(()=>r.value===0?"neutral":r.value<=2||r.value===3||r.value===4?"warning":"success"),a=_(()=>r.value===0?"Bitte Passwort eingeben":r.value<=2?"Schwaches Passwort":r.value===3||r.value===4?"Mittleres Passwort":"Starkes Passwort"),e=_(()=>x.value===l.value);return M(x,u=>{m("update:password",u),r.value<3&&(l.value="")}),M(e,u=>{m("update:passwordsMatch",u)}),M(r,u=>{u<5&&(l.value="")}),(u,v)=>{const i=Z,d=E,g=I,y=K,F=G;return w(),k(B,null,[o("div",Q,[t(g,{label:"Passwort"},{default:n(()=>[t(d,{modelValue:x.value,"onUpdate:modelValue":v[1]||(v[1]=c=>x.value=c),type:p.value?"text":"password",placeholder:"Passwort",color:z.value,autocomplete:"new-password","aria-invalid":r.value<5,"aria-describedby":"password-strength",class:"w-full",ui:{trailing:"pe-1"},icon:"i-lucide-lock"},{trailing:n(()=>[t(i,{icon:p.value?"i-lucide-eye-off":"i-lucide-eye",variant:"link",color:"neutral",size:"sm",onClick:v[0]||(v[0]=c=>p.value=!p.value),"aria-label":p.value?"Passwort ausblenden":"Passwort anzeigen"},null,8,["icon","aria-label"])]),_:1},8,["modelValue","type","color","aria-invalid"])]),_:1}),t(y,{color:z.value,indicator:a.value,"model-value":r.value,max:5,size:"sm"},null,8,["color","indicator","model-value"]),o("p",R,S(a.value)+". Es muss enthalten: ",1),o("ul",Y,[(w(!0),k(B,null,T(P.value,(c,s)=>(w(),k("li",{key:s,class:W(["flex items-center gap-1",c.met?"text-success-600":"text-gray-400"])},[t(F,{name:c.met?"i-lucide-circle-check":"i-lucide-circle-x",class:"size-4"},null,8,["name"]),o("span",ee,[U(S(c.text)+" ",1),o("span",te,S(c.met?"erfüllt":"nicht erfüllt"),1)])],2))),128))])]),o("div",le,[t(g,{label:"Passwort bestätigen"},{default:n(()=>[t(d,{modelValue:l.value,"onUpdate:modelValue":v[3]||(v[3]=c=>l.value=c),type:f.value?"text":"password",placeholder:"Passwort erneut eingeben",autocomplete:"new-password",disabled:r.value<5,color:l.value.length?e.value?"success":"error":"neutral","aria-invalid":l.value.length>0&&!e.value,"aria-describedby":"password-match",ui:{trailing:"pe-1"},icon:"i-lucide-lock",class:"w-full"},{trailing:n(()=>[t(i,{icon:f.value?"i-lucide-eye-off":"i-lucide-eye",variant:"link",color:"neutral",size:"sm",onClick:v[2]||(v[2]=c=>f.value=!f.value),"aria-label":f.value?"Passwort ausblenden":"Passwort anzeigen"},null,8,["icon","aria-label"])]),_:1},8,["modelValue","type","disabled","color","aria-invalid"])]),_:1}),t(y,{color:e.value?"success":"error","model-value":l.value.length?1:0,max:1,size:"sm"},null,8,["color","model-value"]),l.value.length>0&&!e.value?(w(),k("p",ae," Die Passwörter stimmen nicht überein. ")):C("",!0)])],64)}}}),oe=Object.assign(se,{__name:"PasswordForm"}),ne={class:"w-full h-screen flex flex-col items-center"},re={class:"w-full lg:w-1/2"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 px-6 py-6"},ue={class:"w-full flex justify-end px-6 pb-6"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 px-6 py-6"},me={class:"w-full flex justify-between px-6 pb-6"},ce={class:"px-6 py-6"},pe={class:"w-full flex justify-between px-6 pb-6"},_e=A({__name:"index",setup(j){const N=[{title:"Persönliche Daten",icon:"i-lucide-book-user"},{title:"Sicherheit",icon:"i-lucide-lock"},{title:"ID-Check",icon:"i-lucide-id-card"},{title:"Abschluss",icon:"i-lucide-bookmark-check"}],m=b(0),x=O(),l=b({firstName:"",lastName:"",address:{street:"",zip:"",city:"",country:""},birthday:"",phone:"",email:"",password:""}),p=b(""),f=b(!1),h=b(!1);M([()=>l.value.email,p],([a,e])=>{f.value=a.trim()!==""&&a===e});function P(){const a=l.value;return a.firstName.trim()!==""&&a.lastName.trim()!==""&&a.address.street.trim()!==""&&a.address.zip.trim()!==""&&a.address.city.trim()!==""&&a.address.country.trim()!==""&&a.birthday.trim()!==""&&a.phone.trim()!==""&&a.email.trim()!==""&&f.value}const r=_(()=>l.value.email.trim()!==""&&p.value.trim()!==""&&l.value.email!==p.value);async function z(){try{const a=l.value;await D.post("https://saci.key2host.com/api/auth/signup/",{firstname:a.firstName,lastname:a.lastName,password:a.password,sex:"male",birthday:a.birthday,street:a.address.street,postalcode:a.address.zip,city:a.address.city,state:"-",country:a.address.country,email:a.email,phone:a.phone},{withCredentials:!0}),m.value=2;const u=(await D.post("https://saci.key2host.com/api/auth/checkid/",{},{withCredentials:!0})).data.url;window.location.href=u}catch(a){const e=b("");a.response&&a.response.status===400?(console.error("Fehler bei der Anmeldung",a),e.value="Einige Daten scheinen nicht korrekt zu sein."):a.response&&a.response.status===409?(console.error("Fehler bei der Anmeldung",a),e.value="E-Mail oder Telefon wird bereits verwendet."):(console.error("Fehler bei der API-Anfrage:",a.message),e.value="API Fehler"),x.add({icon:"i-heroicons-exclamation-triangle",description:e.value,color:"error",title:"Fehler beim Erstellen des Kontos",duration:2500})}}return X({title:"Konto erstellen",ogTitle:"Konto erstellen",description:"Konto erstellen",ogDescription:"Konto erstellen"}),(a,e)=>{const u=L,v=H,i=E,d=I,g=Z,y=q,F=oe,c=K;return w(),k("div",ne,[t(u,{to:"/",class:"flex items-center mt-6 mb-5"},{default:n(()=>e[17]||(e[17]=[o("img",{src:J,alt:"Key2Host Logo",class:"w-6 h-6"},null,-1),o("span",{class:"font-bold text-lg ml-2"},"Key2Host",-1)])),_:1}),e[26]||(e[26]=o("div",{class:"mb-6"},[o("span",{class:"font-bold text-4xl ml-2"},"Konto erstellen")],-1)),o("div",re,[t(v,{disabled:"",modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),items:N},null,8,["modelValue"])]),m.value===0?(w(),$(y,{key:0,variant:"subtle",class:"mt-5 w-[90vw] lg:w-1/2 shadow-md rounded-2xl"},{default:n(()=>[e[19]||(e[19]=o("div",{class:"border-b px-6 py-4"},[o("span",{class:"font-bold text-2xl"},"Kontaktdaten"),o("p",{class:"text-sm"},"Bitte fülle alle Felder sorgfältig aus.")],-1)),o("div",ie,[t(d,{label:"Vorname"},{default:n(()=>[t(i,{modelValue:l.value.firstName,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.firstName=s),name:"given-name",autocomplete:"given-name",variant:"subtle",icon:"i-lucide-user"},null,8,["modelValue"])]),_:1}),t(d,{label:"Nachname"},{default:n(()=>[t(i,{modelValue:l.value.lastName,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.lastName=s),name:"family-name",autocomplete:"family-name",variant:"subtle",icon:"i-lucide-user"},null,8,["modelValue"])]),_:1}),t(d,{label:"Straße und Hausnummer"},{default:n(()=>[t(i,{modelValue:l.value.address.street,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.address.street=s),name:"address-line1",autocomplete:"address-line1",variant:"subtle",icon:"i-lucide-map-pin"},null,8,["modelValue"])]),_:1}),t(d,{label:"PLZ"},{default:n(()=>[t(i,{modelValue:l.value.address.zip,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.address.zip=s),name:"postal-code",autocomplete:"postal-code",variant:"subtle",icon:"i-lucide-map"},null,8,["modelValue"])]),_:1}),t(d,{label:"Stadt"},{default:n(()=>[t(i,{modelValue:l.value.address.city,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.address.city=s),name:"address-level2",autocomplete:"address-level2",variant:"subtle",icon:"i-lucide-building"},null,8,["modelValue"])]),_:1}),t(d,{label:"Land"},{default:n(()=>[t(i,{modelValue:l.value.address.country,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.address.country=s),name:"country",autocomplete:"country-name",variant:"subtle",icon:"i-lucide-globe"},null,8,["modelValue"])]),_:1}),t(d,{label:"Geburtsdatum"},{default:n(()=>[t(i,{modelValue:l.value.birthday,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.birthday=s),name:"bday",autocomplete:"bday",type:"date",variant:"subtle",icon:"i-lucide-calendar"},null,8,["modelValue"])]),_:1}),t(d,{label:"Handynummer"},{default:n(()=>[t(i,{modelValue:l.value.phone,"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.phone=s),name:"tel",autocomplete:"tel-national",type:"tel",variant:"subtle",icon:"i-lucide-phone"},null,8,["modelValue"])]),_:1}),t(d,{label:"E-Mail"},{default:n(()=>[t(i,{modelValue:l.value.email,"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.email=s),name:"email",autocomplete:"email",type:"email",variant:"subtle",icon:"i-lucide-mail",color:V(r)?"red":void 0,ui:{variant:"subtle",base:V(r)?"border border-red-500":""}},null,8,["modelValue","color","ui"])]),_:1}),t(d,{label:"E-Mail bestätigen","help-color":V(r)?"red":void 0},{default:n(()=>[t(i,{modelValue:p.value,"onUpdate:modelValue":e[10]||(e[10]=s=>p.value=s),name:"email-confirmation",autocomplete:"email",type:"email",variant:"subtle",icon:"i-lucide-mail-check",color:V(r)?"red":void 0,ui:{variant:"subtle",base:V(r)?"border border-red-500":""}},null,8,["modelValue","color","ui"])]),_:1},8,["help-color"])]),o("div",ue,[t(g,{size:"lg",variant:"subtle",disabled:!P(),onClick:e[11]||(e[11]=s=>m.value=1)},{default:n(()=>e[18]||(e[18]=[U(" Weiter ")])),_:1},8,["disabled"])])]),_:1})):C("",!0),m.value===1?(w(),$(y,{key:1,variant:"subtle",class:"mt-5 w-[90vw] lg:w-1/2 shadow-md rounded-2xl"},{default:n(()=>[e[22]||(e[22]=o("div",{class:"border-b px-6 py-4"},[o("span",{class:"font-bold text-2xl"},"Sicherheit"),o("p",{class:"text-sm"},"Bitte wähle ein sicheres Passwort.")],-1)),o("div",de,[t(F,{password:l.value.password,"onUpdate:password":e[12]||(e[12]=s=>l.value.password=s),passwordsMatch:h.value,"onUpdate:passwordsMatch":e[13]||(e[13]=s=>h.value=s)},null,8,["password","passwordsMatch"])]),o("div",me,[t(g,{size:"lg",variant:"subtle",onClick:e[14]||(e[14]=s=>m.value=0)},{default:n(()=>e[20]||(e[20]=[U("Zurück")])),_:1}),t(g,{size:"lg",variant:"subtle",disabled:!h.value,onClick:e[15]||(e[15]=s=>z())},{default:n(()=>e[21]||(e[21]=[U("Weiter ")])),_:1},8,["disabled"])])]),_:1})):C("",!0),m.value===2?(w(),$(y,{key:2,variant:"subtle",class:"mt-5 w-[90vw] lg:w-1/2 shadow-md rounded-2xl"},{default:n(()=>[e[25]||(e[25]=o("div",{class:"border-b px-6 py-4"},[o("span",{class:"font-bold text-2xl"},"ID-Check"),o("p",{class:"text-sm"},"Bitte wähle ein sicheres Passwort.")],-1)),o("div",ce,[e[23]||(e[23]=o("div",{class:"flex items-center justify-center bg-gray-100 rounded-md mb-2"},[o("div",{class:"w-48 h-48 flex items-center justify-center text-center text-gray-700"}," Warten auf ID-Check Dienstleister... ")],-1)),t(c,{animation:"carousel"})]),o("div",pe,[t(g,{size:"lg",variant:"subtle",onClick:e[16]||(e[16]=s=>m.value=1)},{default:n(()=>e[24]||(e[24]=[U("Zurück & erneut versuchen")])),_:1})])]),_:1})):C("",!0)])}}});export{_e as default};
