import{U as C}from"./Wf6pezMW.js";import{_ as U}from"./DfKHHrri.js";import{d as A,T as p,a as S,b as T,n as d,e as x,f as a,w as b,J as j,F as D,r as B,t as o,bu as P,o as c,b4 as M,K as V,b5 as K,ah as w,$ as N,aU as z}from"./b8MZtpyL.js";const I={class:"w-full flex flex-col items-center justify-center mt-6"},R={class:"w-full max-w-2xl flex"},E=["placeholder"],F={class:"mb-40"},J={key:0},H=["onClick"],L=["onClick"],Q={key:1,class:"w-full flex justify-center mt-6"},W={class:"text-red-500 text-lg"},Z={key:2,class:"w-full flex justify-center mt-6"},q={class:"text-gray-500 text-lg"},G={key:0,class:"p-4 text-lg"},O={key:1,class:"p-6 text-center"},X={class:"text-2xl font-bold mb-2"},Y={class:"text-base text-gray-700 mb-6"},ee=["placeholder"],te={class:"flex justify-center gap-4"},ae={class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},ie=A({__name:"index",setup(oe){const h=p(!1),f=p(""),y=p(""),v=p(""),u=p(""),n=p([]),l=p(""),{t:i}=S({useScope:"global"}),k=async()=>{l.value="",n.value=[];let t;l.value=i("products.domain.loading");const s=/^[a-zA-Z0-9.-]+$/;if(!v.value.trim()||!s.test(v.value)||v.value.startsWith(".")){l.value=i("products.domain.errors.notvalid");return}u.value=v.value.trim();try{const e=await(await fetch("https://saci.key2host.com/api/user/getDomainInfo")).json();if(Array.isArray(e.packages))t=e.packages;else{l.value=i("products.domain.errors.erranswer");return}}catch{l.value=i("products.domain.errors.confailed");return}const g=u.value.split("."),r=g.length>1?g[g.length-1]:null;l.value="",r&&t.sort((m,e)=>{if(m.name===r)return-1;if(e.name===r)return 1}),n.value=t},$=(t,s,g)=>{f.value=t,y.value=s;const r=z();if(Array.isArray(n.value)&&n.value.length>0){const m=t.split(".").pop(),e=n.value.find(_=>_.name===m);e?y.value?(r.addToBasket({type:"domain",name:f.value,amount:e.amount,id:e.priceID}),r.openSlideover()):h.value=!0:console.log("Keine passende Domain gefunden.")}else console.log("Results ist kein gültiges Array oder leer:",n.value)};return T({title:i("products.domain.title"),ogTitle:i("products.domain.title"),description:i("products.domain.description"),ogDescription:i("products.domain.description")}),(t,s)=>{const g=C,r=U,m=P;return c(),d(D,null,[x(g,{headline:t.$t("products.domain.headline"),title:t.$t("products.domain.title"),orientation:"horizontal"},{default:b(()=>[a("div",I,[a("div",R,[M(a("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>v.value=e),onKeyup:V(k,["enter"]),placeholder:t.$t("products.domain.searchPlaceholder"),class:"w-full p-4 text-lg border border-gray-300 rounded-l-2xl shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,E),[[K,v.value]]),a("button",{onClick:k,class:"px-6 py-4 bg-blue-600 text-white text-lg font-semibold rounded-r-2xl shadow-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500"},o(t.$t("products.domain.search")),1)])])]),_:1},8,["headline","title"]),a("div",F,[u.value&&n.value.length>0?(c(),d("div",J,[(c(!0),d(D,null,B(n.value,e=>(c(),d("div",{key:e.name,class:"w-full flex flex-wrap justify-center gap-4 mb-4"},[x(r,{class:w(["w-full max-w-6xl relative",e.available?"":"opacity-50"]),title:`.${e.name} Domain`,color:e.available?"primary":"gray",icon:e.available?"i-heroicons-check-circle text-green-500 text-3xl":"i-heroicons-x-circle text-gray-500 text-3xl"},{description:b(()=>[N(" Die Domain "+o(u.value.split(".")[0]+"."+e.name)+" kostet "+o(e.amount+"€")+" pro Jahr. ",1)]),default:b(()=>[a("button",{class:w(["absolute top-1/2 right-4 transform -translate-y-1/2 px-4 py-2 rounded-lg shadow-md hidden sm:block",e.available?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-500 text-white hover:bg-gray-600"]),onClick:_=>$(u.value.split(".")[0]+"."+e.name,e.available,e.amount)},o(e.available?t.$t("products.domain.addBasket"):t.$t("products.domain.transfer.title")),11,H),a("button",{class:w(["px-4 py-2 rounded-lg shadow-md w-full sm:w-auto sm:self-center sm:hidden",e.available?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-500 text-white hover:bg-gray-600"]),onClick:_=>$(u.value.split(".")[0]+"."+e.name,e.available,e.amount)},o(e.available?t.$t("products.domain.addBasket"):t.$t("products.domain.transfer.title")),11,L)]),_:2},1032,["title","color","class","icon"])]))),128))])):l.value?(c(),d("div",Q,[a("p",W,o(l.value),1)])):u.value?(c(),d("div",Z,[a("p",q,o(t.$t("products.domain.noresults")),1)])):j("",!0)]),x(m,{open:h.value,"onUpdate:open":s[2]||(s[2]=e=>h.value=e),dismissible:!1},{content:b(()=>[y.value?(c(),d("div",G," Die Domain "+o(f.value)+" kann momentan nicht gekauft werden. ",1)):(c(),d("div",O,[a("h2",X,o(t.$t("products.domain.transfer.title")),1),a("p",Y,o(t.$t("products.domain.transfer.message")),1),a("input",{type:"text",placeholder:"AUTH-Schlüssel für "+f.value,class:"border border-gray-300 rounded-lg p-2 w-1/2 mb-6"},null,8,ee),a("div",te,[a("button",{class:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",onClick:s[1]||(s[1]=e=>h.value=!1)},o(t.$t("products.domain.transfer.abort")),1),a("button",ae,o(t.$t("products.domain.transfer.continue")),1)])]))]),_:1},8,["open"])],64)}}});export{ie as default};
