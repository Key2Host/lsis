import{d as U,T as v,a as A,b as S,n as u,e as g,J as B,w as x,F as D,r as T,f as a,t as o,bu as j,o as m,b4 as z,K as P,b5 as M,aN as N,g as V,$ as w,ah as K,aU as I}from"./CKuNv7YR.js";import{U as R}from"./B3U0fuY5.js";import{_ as E}from"./BPUZKgYU.js";const F={class:"w-full flex flex-col items-center justify-center mt-6"},J={class:"w-full max-w-2xl flex"},H=["placeholder"],L={key:0},Q={key:1,class:"w-full flex justify-center mb-20"},W={class:"text-red-500 text-lg"},Z={key:2,class:"w-full flex justify-center mb-20"},q={class:"text-gray-500 text-lg"},G={key:0,class:"p-4 text-lg"},O={key:1,class:"p-6 text-center"},X={class:"text-2xl font-bold mb-2"},Y={class:"text-base text-gray-700 mb-6"},ee=["placeholder"],te={class:"flex justify-center gap-4"},ae={class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},re=U({__name:"index",setup(oe){const _=v(!1),y=v(""),b=v(""),h=v(""),p=v(""),r=v([]),i=v(""),{t:l}=A({useScope:"global"}),k=async()=>{i.value="",r.value=[];let t;i.value=l("products.domain.loading");const s=/^[a-zA-Z0-9.-]+$/;if(!h.value.trim()||!s.test(h.value)||h.value.startsWith(".")){i.value=l("products.domain.errors.notvalid");return}p.value=h.value.trim();try{const n=await(await fetch("https://saci.key2host.com/api/user/getDomainInfo")).json();if(Array.isArray(n.packages))t=n.packages;else{i.value=l("products.domain.errors.erranswer");return}}catch{i.value=l("products.domain.errors.confailed");return}const d=p.value.split("."),c=d.length>1?d[d.length-1]:null;i.value="",c&&t.sort((f,n)=>{if(f.name===c)return-1;if(n.name===c)return 1}),r.value=t},$=(t,s,d)=>{y.value=t,b.value=s;const c=I();if(Array.isArray(r.value)&&r.value.length>0){const f=t.split(".").pop(),n=r.value.find(e=>e.name===f);n?b.value?(c.addToBasket({type:"domain",name:y.value,amount:n.amount,id:n.priceID}),c.openSlideover()):_.value=!0:console.log("Keine passende Domain gefunden.")}else console.log("Results ist kein gültiges Array oder leer:",r.value)};return S({title:l("products.domain.title"),ogTitle:l("products.domain.title"),description:l("products.domain.description"),ogDescription:l("products.domain.description")}),(t,s)=>{const d=N,c=R,f=E,n=j;return m(),u(D,null,[g(c,{headline:t.$t("products.domain.headline"),title:t.$t("products.domain.title"),orientation:"horizontal"},{default:x(()=>[a("div",F,[a("div",J,[z(a("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>h.value=e),onKeyup:P(k,["enter"]),placeholder:t.$t("products.domain.searchPlaceholder"),class:"w-full p-4 text-lg border border-gray-300 rounded-l-2xl shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,H),[[M,h.value]]),g(d,{onClick:k,color:"neutral",size:"xl",class:"px-6 py-4 rounded-l-none rounded-r-2xl",label:V(l)("products.domain.search"),autofocus:""},null,8,["label"])])])]),_:1},8,["headline","title"]),p.value&&r.value.length>0?(m(),u("div",L,[(m(!0),u(D,null,T(r.value,e=>(m(),u("div",{key:e.name,class:"w-full flex flex-wrap justify-center gap-4 max-md:max-w-[350px] max-w-[90%] mx-auto mb-4"},[g(f,{class:K(["w-full max-w-6xl relative",e.available?"":"opacity-50"]),title:`.${e.name} Domain`,color:e.available?"primary":"gray",icon:e.available?"i-heroicons-check-circle text-green-500 text-3xl":"i-heroicons-x-circle text-gray-500 text-3xl"},{description:x(()=>[w(" Die Domain "+o(p.value.split(".")[0]+"."+e.name)+" kostet "+o(e.amount+"€")+" pro Jahr. ",1)]),default:x(()=>[g(d,{color:"neutral",size:"xl",class:"absolute top-1/2 right-4 transform -translate-y-1/2 px-4 py-2 rounded-lg shadow-md hidden sm:block",onClick:C=>$(p.value.split(".")[0]+"."+e.name,e.available,e.amount),autofocus:""},{default:x(()=>[w(o(e.available?t.$t("products.domain.addBasket"):t.$t("products.domain.transfer.title")),1)]),_:2},1032,["onClick"]),g(d,{color:"neutral",size:"xl",class:"px-4 py-2 rounded-lg shadow-md w-full sm:w-auto sm:self-center sm:hidden",onClick:C=>$(p.value.split(".")[0]+"."+e.name,e.available,e.amount),autofocus:""},{default:x(()=>[w(o(e.available?t.$t("products.domain.addBasket"):t.$t("products.domain.transfer.title")),1)]),_:2},1032,["onClick"])]),_:2},1032,["title","color","class","icon"])]))),128))])):i.value?(m(),u("div",Q,[a("p",W,o(i.value),1)])):p.value?(m(),u("div",Z,[a("p",q,o(t.$t("products.domain.noresults")),1)])):B("",!0),g(n,{open:_.value,"onUpdate:open":s[2]||(s[2]=e=>_.value=e),dismissible:!1},{content:x(()=>[b.value?(m(),u("div",G," Die Domain "+o(y.value)+" kann momentan nicht gekauft werden. ",1)):(m(),u("div",O,[a("h2",X,o(t.$t("products.domain.transfer.title")),1),a("p",Y,o(t.$t("products.domain.transfer.message")),1),a("input",{type:"text",placeholder:"AUTH-Schlüssel für "+y.value,class:"border border-gray-300 rounded-lg p-2 w-1/2 mb-6"},null,8,ee),a("div",te,[a("button",{class:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",onClick:s[1]||(s[1]=e=>_.value=!1)},o(t.$t("products.domain.transfer.abort")),1),a("button",ae,o(t.$t("products.domain.transfer.continue")),1)])]))]),_:1},8,["open"])],64)}}});export{re as default};
