import{_ as A}from"./C9Kbf73c.js";import{_ as S}from"./D9RYO6NI.js";import{d as V,r as c,aL as I,u as P,a0 as i,a as x,a1 as T,w as b,P as D,a9 as U,b as o,a7 as s,b6 as j,o as r,aT as B,b7 as M,aU as L,a2 as w,ac as N,aI as z}from"./BeKIkNF4.js";const K={class:"w-full flex flex-col items-center justify-center mt-6"},R={class:"w-full max-w-2xl flex"},E=["placeholder"],F={key:0},W=["onClick"],H=["onClick"],J={key:1,class:"w-full flex justify-center mt-6"},Q={class:"text-red-500 text-lg"},Z={key:2,class:"w-full flex justify-center mt-6"},q={class:"text-gray-500 text-lg"},G={key:0,class:"p-4 text-lg"},O={key:1,class:"p-6 text-center"},X={class:"text-2xl font-bold mb-2"},Y={class:"text-base text-gray-700 mb-6"},ee=["placeholder"],te={class:"flex justify-center gap-4"},ae={class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},ie=V({__name:"index",setup(oe){const h=c(!1),f=c(""),y=c(""),u=c(""),n=c(""),l=c([]),m=c(""),{t:p}=I({useScope:"global"}),k=async()=>{m.value="",l.value=[],m.value=p("products.domain.loading");const t=/^[a-zA-Z0-9.-]+$/;if(!u.value.trim()||!t.test(u.value)||u.value.startsWith(".")){m.value=p("products.domain.notvalid");return}n.value=u.value.trim(),console.log(`Suche nach Domain: ${n.value}`);let a=await C();const v=n.value.split("."),d=v.length>1?v[v.length-1]:"";m.value="",a.sort((g,e)=>g.tld===d?-1:e.tld===d?1:0),l.value=a},C=async()=>{try{const a=await(await fetch("https://saci.key2host.com/api/user/getDomainInfo")).json();if(Array.isArray(a.packages))return a.packages;console.error("Die API hat kein Array von Paketen zurückgegeben.")}catch(t){console.error("Fehler beim Abrufen der Webspace-Informationen:",t)}},$=(t,a,v)=>{f.value=t,y.value=a;const d=z();if(Array.isArray(l.value)&&l.value.length>0){const g=t.split(".").pop(),e=l.value.find(_=>_.name===g);e?y.value?(d.addToBasket({type:"domain",name:f.value,amount:e.amount,id:e.priceID}),d.openSlideover()):h.value=!0:console.log("Keine passende Domain gefunden.")}else console.log("Results ist kein gültiges Array oder leer:",l.value)};return P({title:p("products.domain.title"),ogTitle:p("products.domain.title"),description:p("products.domain.description"),ogDescription:p("products.domain.description")}),(t,a)=>{const v=A,d=S,g=j;return r(),i(D,null,[x(v,{headline:t.$t("products.domain.headline"),title:t.$t("products.domain.title"),align:"left"},{default:b(()=>[o("div",K,[o("div",R,[B(o("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),onKeyup:M(k,["enter"]),placeholder:t.$t("products.domain.searchPlaceholder"),class:"w-full p-4 text-lg border border-gray-300 rounded-l-2xl shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,E),[[L,u.value]]),o("button",{onClick:k,class:"px-6 py-4 bg-blue-600 text-white text-lg font-semibold rounded-r-2xl shadow-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500"},s(t.$t("products.domain.search")),1)])])]),_:1},8,["headline","title"]),n.value&&l.value.length>0?(r(),i("div",F,[(r(!0),i(D,null,U(l.value,e=>(r(),i("div",{key:e.name,class:"w-full flex flex-wrap justify-center gap-4 mb-4"},[x(d,{class:w(["w-full max-w-6xl relative",e.available?"":"opacity-50"]),title:`.${e.name} Domain`,color:e.available?"primary":"gray",icon:e.available?"i-heroicons-check-circle text-green-500 text-3xl":"i-heroicons-x-circle text-gray-500 text-3xl"},{description:b(()=>[N(" Die Domain "+s(n.value.split(".")[0]+"."+e.name)+" kostet "+s(e.amount+"€")+" pro Jahr. ",1)]),default:b(()=>[o("button",{class:w(["absolute top-1/2 right-4 transform -translate-y-1/2 px-4 py-2 rounded-lg shadow-md hidden sm:block",e.available?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-500 text-white hover:bg-gray-600"]),onClick:_=>$(n.value.split(".")[0]+"."+e.name,e.available,e.amount)},s(e.available?t.$t("products.domain.addBasket"):t.$t("products.domain.transfer.title")),11,W),o("button",{class:w(["px-4 py-2 rounded-lg shadow-md w-full sm:w-auto sm:self-center sm:hidden",e.available?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-500 text-white hover:bg-gray-600"]),onClick:_=>$(n.value.split(".")[0]+"."+e.name,e.available,e.amount)},s(e.available?t.$t("products.domain.addBasket"):t.$t("products.domain.transfer.title")),11,H)]),_:2},1032,["title","color","class","icon"])]))),128))])):m.value?(r(),i("div",J,[o("p",Q,s(m.value),1)])):n.value?(r(),i("div",Z,[o("p",q,s(t.$t("products.domain.noresults")),1)])):T("",!0),x(g,{modelValue:h.value,"onUpdate:modelValue":a[2]||(a[2]=e=>h.value=e)},{default:b(()=>[y.value?(r(),i("div",G," Die Domain "+s(f.value)+" kann momentan nicht gekauft werden. ",1)):(r(),i("div",O,[o("h2",X,s(t.$t("products.domain.transfer.title")),1),o("p",Y,s(t.$t("products.domain.transfer.message")),1),o("input",{type:"text",placeholder:"AUTH-Schlüssel für "+f.value,class:"border border-gray-300 rounded-lg p-2 w-1/2 mb-6"},null,8,ee),o("div",te,[o("button",{class:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",onClick:a[1]||(a[1]=e=>h.value=!1)},s(t.$t("products.domain.transfer.abort")),1),o("button",ae,s(t.$t("products.domain.transfer.continue")),1)])]))]),_:1},8,["modelValue"])],64)}}});export{ie as default};
