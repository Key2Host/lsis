"use strict";(self["webpackChunkwebapp"]=self["webpackChunkwebapp"]||[]).push([[452],{452:function(e,t,o){o.r(t),o.d(t,{default:function(){return N}});var s=o(6768),a=o(5130),r=o(4232);const n={class:"login"},l={class:"login-content"},i={class:"text-center"},d={class:"text-inverse text-opacity-50 text-center mb-4"},c={class:"mb-3"},m={class:"d-flex"},u={class:"form-label"},p={class:"input-group flex-nowrap"},f={class:"mb-3"},b={class:"d-flex"},k={class:"form-label"},h={class:"input-group flex-nowrap"},L={class:"mb-3"},v={class:"row align-items-center"},g={class:"col-6"},y={class:"form-check"},A={class:"form-check-label",for:"rememberCheck"},w={class:"col-6 text-end"},x={type:"submit",class:"btn btn-outline-theme btn-lg d-block w-100 fw-500 mb-3"},F={class:"fixed-bottom mb-2 text-center small text-inverse text-opacity-50"},E={class:"modal fade",id:"modal2FA","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"modal2FALabel","aria-hidden":"true"},_={class:"modal-dialog modal-dialog-centered"},I={class:"modal-content"},$={class:"modal-body"},C={class:"row d-flex justify-content-center"},S={class:"modal-footer"},T={type:"submit",class:"btn btn-primary",form:"2faForm",ref:"submit2FAButton"},U={class:"toasts-container"},V={class:"toast bg-warning bg-opacity-50","data-autohide":"true",id:"toastError"},D={class:"toast-body"};function H(e,t,o,H,M,O){const R=(0,s.g2)("RouterLink");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",n,[(0,s.Lk)("div",l,[(0,s.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>O.submitForm&&O.submitForm(...e)),["prevent"]))},[(0,s.Lk)("h1",i,(0,r.v_)(e.$t("AUTH.LOGIN.TITLE")),1),(0,s.Lk)("div",d,(0,r.v_)(e.$t("AUTH.LOGIN.DESC")),1),(0,s.Lk)("div",c,[(0,s.Lk)("div",m,[(0,s.Lk)("label",u,[(0,s.eW)((0,r.v_)(e.$t("GENERAL.EMAIL"))+" ",1),t[12]||(t[12]=(0,s.Lk)("span",{class:"text-danger"},"*",-1))])]),(0,s.Lk)("div",p,[t[13]||(t[13]=(0,s.Lk)("i",{class:"fa-solid fa-image-portrait input-group-text",id:"addon-wrapping"},null,-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>M.form.username=e),type:"email",class:"form-control form-control-lg bg-white bg-opacity-5 fs-14px",autocomplete:"email",required:""},null,512),[[a.Jo,M.form.username]])])]),(0,s.Lk)("div",f,[(0,s.Lk)("div",b,[(0,s.Lk)("label",k,[(0,s.eW)((0,r.v_)(e.$t("GENERAL.PASSWORD"))+" ",1),t[14]||(t[14]=(0,s.Lk)("span",{class:"text-danger"},"*",-1))]),(0,s.bF)(R,{to:"/recover",class:"ms-auto text-inverse text-decoration-none text-opacity-50"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(e.$t("AUTH.LOGIN.PWFORGOT")),1)])),_:1})]),(0,s.Lk)("div",h,[t[16]||(t[16]=(0,s.Lk)("i",{class:"fa-solid fa-key input-group-text",id:"addon-wrapping"},null,-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>M.form.password=e),type:"password",id:"pwField",class:"form-control form-control-lg bg-white bg-opacity-5 fs-14px",autocomplete:"password",required:""},null,512),[[a.Jo,M.form.password]]),(0,s.Lk)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>O.togglePWV&&O.togglePWV(...e)),class:"input-group-text"},t[15]||(t[15]=[(0,s.Lk)("i",{id:"pweye",class:"fa fa-eye"},null,-1)]))])]),(0,s.Lk)("div",L,[(0,s.Lk)("div",v,[(0,s.Lk)("div",g,[(0,s.Lk)("div",y,[(0,s.bo)((0,s.Lk)("input",{class:"form-check-input",type:"checkbox",id:"rememberCheck","onUpdate:modelValue":t[3]||(t[3]=e=>M.rememberMe=e)},null,512),[[a.lH,M.rememberMe]]),(0,s.Lk)("label",A,(0,r.v_)(e.$t("AUTH.LOGIN.REMEMBER")),1)])]),(0,s.Lk)("div",w,[(0,s.bF)(R,{to:"",class:"text-body"},{default:(0,s.k6)((()=>t[17]||(t[17]=[(0,s.Lk)("i",{class:"fa-brands fa-apple fa-xl m-2 align-middle",style:{height:"0.2em"}},null,-1)]))),_:1}),(0,s.bF)(R,{to:"",class:"text-body"},{default:(0,s.k6)((()=>t[18]||(t[18]=[(0,s.Lk)("i",{class:"fa-brands fa-google fa-lg m-2 align-middle"},null,-1)]))),_:1}),(0,s.bF)(R,{to:"",class:"text-body"},{default:(0,s.k6)((()=>t[19]||(t[19]=[(0,s.Lk)("i",{class:"fa-brands fa-microsoft fa-lg m-2 align-middle"},null,-1)]))),_:1})])])]),(0,s.Lk)("button",x,(0,r.v_)(e.$t("AUTH.LOGIN.TITLE")),1)],32),(0,s.Lk)("div",F,[(0,s.eW)(" Copyright © "+(0,r.v_)(M.year)+" ",1),t[20]||(t[20]=(0,s.Lk)("a",{href:"https://www.key2host.com/",target:"_blank"},"Key2Host",-1)),(0,s.eW)(" - "+(0,r.v_)(e.$t("APP.LIC")),1)])])]),(0,s.Lk)("div",E,[(0,s.Lk)("div",_,[(0,s.Lk)("div",I,[t[23]||(t[23]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"modal2FALabel"},"2-Faktor Authentifizierung")],-1)),(0,s.Lk)("div",$,[(0,s.Lk)("div",C,[t[21]||(t[21]=(0,s.Lk)("div",{class:"col-12 text-center"},"Da Sie die Zwei-Faktor-Authentifizierung in Ihrem Konto eingerichtet haben, müssen Sie nun den Code aus Ihrer Authenticator-App (TOTP) eingeben, um mit der Anmeldung fortzufahren.",-1)),(0,s.Lk)("form",{id:"2faForm",class:"otp-field col-3 mt-3",onSubmit:t[11]||(t[11]=(0,a.D$)(((...e)=>O.submit2FA&&O.submit2FA(...e)),["prevent"]))},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>M.form.token.a=e),type:"text",inputmode:"numeric",class:"form-control",autocomplete:"one-time-code",autofocus:"",required:""},null,512),[[a.Jo,M.form.token.a]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>M.form.token.b=e),type:"text",inputmode:"numeric",class:"form-control",autofocus:"",required:"",disabled:""},null,512),[[a.Jo,M.form.token.b]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>M.form.token.c=e),type:"text",inputmode:"numeric",class:"form-control",autofocus:"",required:"",disabled:""},null,512),[[a.Jo,M.form.token.c]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>M.form.token.d=e),type:"text",inputmode:"numeric",class:"form-control",autofocus:"",required:"",disabled:""},null,512),[[a.Jo,M.form.token.d]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>M.form.token.e=e),type:"text",inputmode:"numeric",class:"form-control",autofocus:"",required:"",disabled:""},null,512),[[a.Jo,M.form.token.e]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>M.form.token.f=e),type:"text",inputmode:"numeric",class:"form-control",autofocus:"",required:"",disabled:""},null,512),[[a.Jo,M.form.token.f]])],32)])]),(0,s.Lk)("div",S,[t[22]||(t[22]=(0,s.Lk)("button",{type:"button",class:"btn btn-outline-default","data-bs-dismiss":"modal"},"Abbrechen",-1)),(0,s.Lk)("button",T,"Anmelden",512)])])])]),(0,s.Lk)("div",U,[(0,s.Lk)("div",V,[t[24]||(t[24]=(0,s.Lk)("div",{class:"toast-header"},[(0,s.Lk)("i",{class:"far fa-triangle-exclamation text-muted me-2"}),(0,s.Lk)("strong",{class:"me-auto"},"Fehler"),(0,s.Lk)("small",null,"Jetzt")],-1)),(0,s.Lk)("div",D,(0,r.v_)(this.errorMessage),1)])])],64)}o(8992),o(3215),o(4520),o(3949);var M=o(5417),O=o(4373),R=o(8077),q=o(8704),B={data(){return{year:(new Date).getFullYear(),form:{username:"",password:"",token:{a:"",b:"",c:"",d:"",e:"",f:""}},errorMessage:"",modal2FA:"",rememberMe:!1}},mounted(){const e=(0,M.z)();e.appSidebarHide=!0,e.appHeaderHide=!0,e.appFooter=!1,e.appContentClass="p-0",this.modal2FA=new R.aF(document.getElementById("modal2FA"));const t=document.querySelectorAll(".otp-field > input"),o=this.$refs.submit2FAButton;window.addEventListener("load",(()=>t[0].focus())),o.setAttribute("disabled","disabled"),document.getElementById("modal2FA").addEventListener("hide.bs.modal",(()=>{this.form.token={a:"",b:"",c:"",d:"",e:"",f:""},t.forEach((e=>{e.value="",e.setAttribute("disabled","disabled")})),t[0].removeAttribute("disabled"),t[0].focus(),o.classList.remove("active"),o.setAttribute("disabled","disabled")}));const s=()=>{const e=Array.from(t).every((e=>""!==e.value));e?(o.classList.add("active"),o.removeAttribute("disabled")):(o.classList.remove("active"),o.setAttribute("disabled","disabled"))};t.forEach(((e,o)=>{e.addEventListener("input",(()=>{let a=e.value.replace(/\D/g,"");a.length>1&&(a=a.slice(0,1)),e.value=a,e.value&&o<t.length-1&&(t[o+1].removeAttribute("disabled"),t[o+1].focus()),this.form.token[Object.keys(this.form.token)[o]]=e.value,s()})),e.addEventListener("keydown",(s=>{"ArrowLeft"===s.key&&o>0?(t[o-1].focus(),setTimeout((()=>t[o-1].setSelectionRange(1,1)),0)):"ArrowRight"===s.key&&o<t.length-1?(t[o+1].focus(),setTimeout((()=>t[o+1].setSelectionRange(1,1)),0)):"Backspace"!==s.key&&"Delete"!==s.key||""!==e.value||(o>0&&(t[o-1].focus(),t[o-1].value="",this.form.token[Object.keys(this.form.token)[o-1]]="",setTimeout((()=>t[o-1].setSelectionRange(1,1)),0)),e.value="",this.form.token[Object.keys(this.form.token)[o]]="")})),e.addEventListener("paste",(e=>{e.preventDefault();const o=e.clipboardData.getData("text").trim(),a=o.split("").filter((e=>/\d/.test(e)));a.forEach(((e,o)=>{o<t.length&&(t[o].value=e,this.form.token[Object.keys(this.form.token)[o]]=e,t[o].removeAttribute("disabled"))})),s(),t[Math.min(a.length,t.length-1)].focus()}))})),t.forEach(((e,t)=>{t>0&&e.setAttribute("disabled","disabled")}))},beforeUnmount(){const e=(0,M.z)();e.appSidebarHide=!1,e.appHeaderHide=!1,e.appFooter=!0,e.appContentClass=""},methods:{validateInputs(e,t){const o=Array.from(e).every((e=>""!==e.value));o?(t.classList.add("active"),t.removeAttribute("disabled")):(t.classList.remove("active"),t.setAttribute("disabled","disabled"))},async submitForm(){try{const e=await O.A.post("https://saci.key2host.com/auth",{username:this.form.username,password:this.form.password}),t={domain:".key2host.com",path:"/",sameSite:"None",secure:!0,expires:this.rememberMe?1:void 0};q.A.set("id_token",e.data.id_token,t),q.A.set("access_token",e.data.access_token,t),window.location.href="https://cp.key2host.com/"}catch(e){e.response&&"2FA token required"==e.response.data?this.modal2FA.toggle():(this.errorMessage=e.response?e.response.data:"Die Anfrage konnte nicht verarbeitet werden. Versuche es später erneut!",new R.y8(document.getElementById("toastError")).show())}},async submit2FA(){const e=`${this.form.token.a}${this.form.token.b}${this.form.token.c}${this.form.token.d}${this.form.token.e}${this.form.token.f}`;try{const t=await O.A.post("https://saci.key2host.com/auth",{username:this.form.username,password:this.form.password,token:e}),o={domain:".key2host.com",path:"/",sameSite:"None",secure:!0,expires:this.rememberMe?1:void 0};q.A.set("id_token",t.data.id_token,o),q.A.set("access_token",t.data.access_token,o),window.location.href="https://cp.key2host.com/"}catch(t){this.modal2FA.toggle(),this.errorMessage=t.response?t.response.data:"Dein Code konnte nicht geprüft werden. Versuche es später erneut!",new R.y8(document.getElementById("toastError")).show()}},togglePWV(){const e=document.getElementById("pweye"),t=document.getElementById("pwField");e.classList.contains("fa-eye")?(e.classList.replace("fa-eye","fa-eye-slash"),t.type="text"):(e.classList.replace("fa-eye-slash","fa-eye"),t.type="password")}}},W=o(1241);const J=(0,W.A)(B,[["render",H]]);var N=J}}]);
//# sourceMappingURL=452.ed5df6d7.js.map